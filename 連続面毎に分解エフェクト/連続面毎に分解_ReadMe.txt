連続面毎に分解エフェクト
モデルを頂点の繋がっているバーツごとに分解し、吹き飛ばす様に移動させるエフェクトです。

どるるP作のプラグインでモデルを編集して使います。
このエフェクトの使用にはPMDエディタの使い方の知識が必要です。
PMDエディタ0.1.3.9で動作を確認しています。ReadMe内での説明も同バージョンのものです。


●「部位破壊エフェクト」を使った事のある方へ
使い方がほとんど同じです。今回のプラグインはモデルを読み込んだらそのまま実行してモデルを保存するだけで使えます。



●使い方
1.「連続面重心書き込みプラグイン」フォルダに入っている「連続面重心書き込み.dll」をpmdエディタの「User」フォルダにコピーしてください。
PMDEditor_0139 → _plugin → User というフォルダ構成になっています。
2.使うモデルやアクセサリをPMDエディタに読み込み、プラグインの「連続面重心書き込み」を実行します。
　プラグインの起動にはメインウィンドウから 編集→プラグイン→User→連続面重心書き込み を選択します。
　終了の表示が出たら完了です。頂点数が多いモデルだととても時間がかかるので注意してください。
　プラグイン実行中に表示される進行度は後半になる程加速していくので、最初の見積もりよりは数倍速く終わるはずです。
4.終わったら「名前を付けて保存」でPMXモデルとして保存します。
5.保存したPMXモデルをMMDに読み込み、「連続面毎に分解.fx」を割り当て、サンプルモーションを読み込んで再生してください。
　サンプルモーションは0フレームだけのモーションなのでそのままでは0フレーム目しか再生されません。再生フレームを0〜1000位に指定してください。

各ボーンを移動して動きを調整できます。エフェクト用のボーンがタイムライン上で動く事は想定していないので、基本的にキーフレームは0フレーム目だけに登録してください。

fxファイルをテキストエディタで開くと最初の部分で、MMDでは変更できない設定が出来ます。



●ボーンの機能
「モデル親」と「崩壊中心」だけはXYZ座標、他のボーンはX座標の移動だけを使います。

「モデル親」
元モデルのボーンの変わりにモデルを移動する為のボーンです。全体をまとめての移動だけが出来ます。

「崩壊中心」
モデルの崩壊が伝わる中心位置です。

「崩壊速度」
モデルの崩壊が伝わる速度です。正のX座標が秒速になります。
Xが0の時は全体が同時に崩壊します。

「衝撃速度」
破片が崩壊の伝わる方向に飛ぶ秒速です

「回転速度」
破片の1秒間の回転角度です
回転方向はランダムです。

「初期回転量」
破片になった瞬間に切り替わる角度です。

「重力ﾍﾞｸﾄﾙ」
重力の方向と強さです。原点とボーン位置の距離が秒間加速度になります。

「崩壊開始F」
正のX座標が、「崩壊中心」の位置で崩壊が始まるフレーム数になります
X座標をマイナスにすると崩壊を進めた状態になります。

「ﾌｪｰﾄﾞ開始F」
正のX座標が破片になってから透明化が始まるまでのフレーム数になります

「ﾌｪｰﾄﾞ期間F」
正のX座標が透明化が始まってから完全に消えるまでのフレーム数になります
フェードに関するボーンが2つ共に0以下の時はフェードを行いません。



●注意
プラグインを実行すると、追加UV1にエフェクト用の情報を書き込みます。
追加UV1を使っているモデルに使用する場合は改造が必要です。

エフェクトをかけたモデルは全ての面が両面化されて表示されます。xファイルやpmxモデルで半透明の材質が有る場合は注意してください。
エフェクトをかけるとモデルの輪郭と地面影が無くなります。セルフシャドウは残ります。

分解される部位をボーンで移動すると破片の飛ぶ方向がおかしくなるので、基本ポーズでの使用を推奨します。
モデルに元からあるボーンでモデルを移動･変形すると破片の飛ぶ方向や回転軸がずれてしまいます。
モーフの変形でもずれるので注意してください。
PMDｴﾃﾞｨﾀでポーズを作って基本姿勢として保存しておけば任意のポーズから分解できます。
プラグインで追加される「モデル親」ボーンでのモデル全体の移動だけはエフェクトに正しく影響を与えます。「モデル親」ボーンを多段化しても正しく動きます。


